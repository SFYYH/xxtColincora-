# school 模块说明

---

> 该模块的主要作用是实现程序获取页面上出现的课程以及章节。

### 一、文件说明：
#### template.py 文件
该文件中定义一下了3个类

- **Course（课程类）**

  | 属性名   | 属性作用                                                     |
  | :------- | ------------------------------------------------------------ |
  | name     | 课程的名称                                                   |
  | courseid | 课程的id，由学习通提供，可在页面中找到，用于生成章节链接     |
  | clazzid  | 不知道表示什么，由学习通提供，可在页面中找到，用于生成章节链接 |
  | personid | 学生的id，由学习通提供，可在页面中找到，用于生成章节链接     |
  | url      | 课程的URL                                                    |

  | 方法名        | 方法作用                      |
  | ------------- | ----------------------------- |
  | get_ZJ_path() | 返回当前课程的章节的URL字符串 |

  

- **Chapter（章节类）**

  | 属性名       | 属性作用                           |
  | ------------ | ---------------------------------- |
  | catalog_sbar | 章节号                             |
  | name         | 章节的名称                         |
  | webElement   | 章节的WebElement对象，用于进入章节 |
  | isFinish     | 标志当前章节是否完成               |

  | 方法名     | 方法作用                 |
  | ---------- | ------------------------ |
  | toString() | 返回当前章节描述的字符串 |

  

- **School（学校类）**

  该类是一个抽象类，在School类中定义了两个抽象方法分别是**get_courses()**和**get_chapters()**

  **get_courses()** 方法的主要作用是获取当前页面中的课程，并将每个课程封装为Course的对象并保存在数组中。
  *该方法会返回一个元素为Course的数组*
  
  **get_chapters()** 方法主要作用是获取当前页面中的课程，并将每个课程封装为Chapter的对象并保持在数组中。
  *该方法会返回一个元素为Chapter的数组*

#### concreteSchool.py 文件

该文件保存具体的学校类

当该文件中的学校类无法满足需求时，就需要在该文件中添加新的学校类

#### getter.py 文件

该文件中保存了学校类的获取方法

**schoolGetter()** 方法通过反射的方式根据传入的学校名来创建学校对象



### 二、无法获取课程或章节的原因

> 由于学校不同，学习通的页面可能也会不同。导致一样的程序有些人能用，有些人不能用

**例如：** 有的学校在课程标签的属性中有 class="color1" 所以程序可以通过 class="color1" 来定位课程标签。而别的学校课程标签中 class 的值不一定为 "color1" 程序运行就会出现异常。



### 三、无法获取课程或章节的解决方式：

> 目前这个问题还没有通用的解决方式

程序中提供了默认获取课程和章节的类 *（concreteSchol.py中的 Default 类）* ，该类能够满足大部分人的需求。但仍有部分人的学习通页面和默认的不一样。

如果遇到这个问题，就需要自己根据页面编写获取课程和章节的学校类。

**注意：** 

1. 自定义的学校类必须写在 *concreteSchool.py* 文件中。
2. 自定义学校类必须继承 *template.py* 中的 *School* 抽象类，并重写其中的抽象方法。
3. 将 *config.ini* 文件中 *school* 部分的 *school_type* 选项的值改为自定义学校类的*类名*
